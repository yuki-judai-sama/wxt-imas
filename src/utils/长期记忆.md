# 学マス主题浏览器扩展插件 - 长期记忆

## 📋 项目架构总览

### 🎯 后端代码（ImasService）

**技术栈：**
- Spring Boot 2.6.13
- Spring Web MVC
- Spring Scheduling
- Jackson JSON处理
- 代理服务器访问被墙的Nitter实例

**核心组件：**
1. **ServiceApplication** - Spring Boot主应用类，启用定时任务调度
2. **TwitterController** - REST API控制器，提供`/TwitterController/getTwitterContent`接口
3. **TwitterRssService** - 核心业务服务，从多个Nitter实例抓取推文数据
4. **TwitterContentScheduler** - 定时调度器，每小时执行推文抓取任务
5. **ConfigConstants** - 配置常量类，管理所有配置参数
6. **CorsConfig** - 跨域配置，允许前端访问

**数据流程：**
```
Nitter实例 → RSS抓取 → 数据解析 → 内容清理 → 时间排序 → 文件存储 → API提供
```

**配置信息：**
- 服务端口：8115
- 代理服务器：127.0.0.1:7890
- 数据存储路径：/www/wwwroot/imas/twitterContentList
- 目标用户：12个学マス成员Twitter账号
- 每个用户最多保存10条推文

### 🎨 前端代码（wxt-imas）

**技术栈：**
- Vue 3 + Element Plus + WXT框架 + TypeScript
- 功能定位：学マス主题浏览器扩展插件

**主要组件：**
1. **PopPlugin.vue** - 弹窗插件界面，主题切换功能
2. **NewTab.vue** - 新标签页主界面，包含搜索和推文展示
3. **Options.vue** - 设置页面，支持主题和搜索引擎配置
4. **utils工具类** - 颜色转换、图片处理、存储管理等

**核心功能：**
- **主题系统**：12个学マス成员主题，支持自定义背景图
- **搜索功能**：支持Google、百度、B站、必应等搜索引擎
- **推文聚合**：实时展示成员推文动态，支持筛选和图片预览
- **响应式设计**：适配不同屏幕尺寸的现代化UI

### 🔄 前后端交互

**API接口：**
- 后端：`POST http://127.0.0.1:8115/TwitterController/getTwitterContent`
- 前端：通过axios调用获取推文数据

**数据格式：**
```json
{
  "data": [推文数组],
  "includes": {媒体信息},
  "meta": {元数据}
}
```

## 📋 长期记忆规则

### 🎯 必须遵守的规则

1. **语言要求**
   - ✅ 所有回复必须使用中文
   - ❌ 不得使用英文或其他语言回复

2. **测试限制**
   - ✅ 未经您允许，不可创建测试类
   - ✅ 未经您允许，不可执行测试脚本
   - ✅ 未经您允许，不可运行测试程序
   - ✅ 所有测试行为必须由您本人执行

3. **开发原则**
   - 优先编辑现有文件，避免创建新文件
   - 保持代码规范性和一致性
   - 遵循项目的技术栈和架构设计

### 📁 项目文件结构

```
ImasService/                    # 后端项目
├── src/
│   ├── main/java/cn/service/
│   │   ├── ServiceApplication.java
│   │   ├── controller/TwitterController.java
│   │   ├── service/TwitterRssService.java
│   │   ├── scheduler/TwitterContentScheduler.java
│   │   └── utils/
│   │       ├── ConfigConstants.java
│   │       └── CorsConfig.java
│   └── resources/
│       └── application.yml
│   └── test/java/cn/service/
│       └── NitterRssTest.java

wxt-imas/                       # 前端项目
├── components/
│   └── PopPlugin.vue
├── entrypoints/
│   ├── popup/App.vue
│   ├── options/Options.vue
│   ├── newtab/NewTab.vue
│   ├── background.ts
│   └── content.ts
├── src/utils/
│   ├── $axios.js
│   ├── util.js
│   ├── appConfig.js
│   └── 长期记忆.md            # 本文件
├── public/
│   ├── icon/                  # 图标资源
│   ├── idol/                  # 成员图片资源
│   └── js/
└── package.json
```

### 🎯 学マス成员配置

**12个目标成员：**
1. 花海 咲季 (aoi___nagatsuki)
2. 月村 手毬 (ojikanao0809)
3. 藤田 ことね (Iida_Hikaru_828)
4. 有村 麻央 (tsumugi_nanase)
5. 葛城 リーリヤ (kana_hanaiwa)
6. 紫雲 清夏 (miya_minato1216)
7. 倉本 千奈 (mao_ito05)
8. 篠澤 広 (reina_kawamura6)
9. 花海 佑芽 (Matsuda_Ayane7)
10. 十王 星南 (hitaka_mashiro)
11. 姫崎 莉波 (yuri_usui0515)
12. 秦谷 美鈴 (Harusaki_non)

### 🔧 开发环境配置

**后端配置：**
- 端口：8115
- 代理：127.0.0.1:7890
- 数据路径：/www/wwwroot/imas/twitterContentList

**前端配置：**
- API基础URL：http://127.0.0.1:8115
- 支持浏览器：Chrome、Edge、Firefox
- 构建工具：WXT

---

**最后更新时间：** 2024年12月19日
**版本：** 1.0.0
**维护者：** YukiJudai
